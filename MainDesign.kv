#:include PIDDesign.kv
#:include DataDesign.kv

WindowManager:
    MainScreen:
    PIDScreen:
    DataScreen:


<MainScreen>:
    name: "main"
    motorSpeed1: motorSpeed1
    motorSpeed2: motorSpeed2
    motorSpeed3: motorSpeed3
    motorSpeed4: motorSpeed4
    manualspeed: manualspeed

    #canvas:
    #    Rectangle:
    #        pos: self.pos
    #        size: self.size
    #        source: "Back5.png"


    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: .05


            Label:
                font_size: 30
                #color: [0,0,0,1]
                text: "RobuROC - Interface"
                bold: True

        GridLayout:
            cols:2
            size_hint: 1,1
            spacing: 10

            BoxLayout:
                orientation: 'vertical'

                Label:
                    size_hint: 1,.11
                    font_size: 20
                    text: "Motor Control:"

                StackLayout:
                    orientation: 'lr-tb'
                    pos: self.pos
                    size: self.size

                    BoxLayout:
                        orientation: 'vertical'
                        canvas:
                            Color:
                                rgb: [1, 0, 0]
                            Rectangle:
                                pos: self.pos
                                size: self.size

                        StackLayout:
                            pos_hint: {'x': 0, 'center': 1}
                            size_hint: 1,.1
                            padding: (0,10)

                            Label:
                                size_hint: 0.2,1
                                font_size: 18
                                text: "Motor 1:"
                                italic: True

                            TextInput:
                                id: motorSpeed1
                                size_hint: 0.6,1
                                hint_text: 'Insert Speed'
                                input_filter: 'int'
                                font_size: 16
                                multiline: False
                                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

                            Button:
                                size_hint: 0.2,1
                                text: "Set speed"
                                on_release:
                                    root.mwsetSpeed1()



                        StackLayout:
                            pos_hint: {'x': 0, 'center': 1}
                            size_hint: 1,.1
                            padding: (0,10)

                            Label:
                                size_hint: 0.2,1
                                font_size: 18
                                text: "Motor 2:"
                                italic: True

                            TextInput:
                                id: motorSpeed2
                                size_hint: 0.6,1
                                hint_text: 'Insert Speed'
                                input_filter: 'int'
                                font_size: 16
                                multiline: False
                                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

                            Button:
                                size_hint: 0.2,1
                                text: "Set speed"
                                on_release:
                                    root.mwsetSpeed2()

                        StackLayout:
                            pos_hint: {'x': 0, 'center': 1}
                            size_hint: 1,.1
                            padding: (0,10)

                            Label:
                                size_hint: 0.2,1
                                font_size: 18
                                text: "Motor 3:"
                                italic: True

                            TextInput:
                                id: motorSpeed3
                                size_hint: 0.6,1
                                hint_text: 'Insert Speed'
                                input_filter: 'int'
                                font_size: 16
                                multiline: False
                                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

                            Button:
                                size_hint: 0.2,1
                                text: "Set speed"
                                on_release:
                                    root.mwsetSpeed3()

                        StackLayout:
                            pos_hint: {'x': 0, 'center': 1}
                            size_hint: 1,.1
                            padding: (0,10)

                            Label:
                                size_hint: 0.2,1
                                font_size: 18
                                text: "Motor 4:"
                                italic: True


                            TextInput:
                                id: motorSpeed4
                                size_hint: 0.6,1
                                hint_text: 'Insert Speed'
                                input_filter: 'int'
                                font_size: 16
                                multiline: False
                                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

                            Button:
                                size_hint: 0.2,1
                                text: "Set speed"
                                on_release:
                                    root.mwsetSpeed4()

                        StackLayout:
                            pos_hint: {'x': 0.1, 'bottom': 1}
                            size_hint: 1,.1

                            Button:
                                size_hint: .8,.5
                                text: "Set speed for all"
                                on_release: root.mwsetSpeedAll()


            BoxLayout:
                orientation: 'vertical'

                Label:
                    size_hint: 1,.11
                    font_size: 20
                    text: "Direction Control:"

                GridLayout:
                    cols:1
                    canvas:
                        Color:
                            rgb: [0, 1, 0]
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    AnchorLayout:
                        size_hint: [1, None]
                        size_y: 75
                        anchor_x: 'center'
                        anchor_y: 'center'

                        Button:
                            pos_hint: {'x': .4, 'top': .85}
                            size_hint: [None, None]
                            size: 75, 75
                            text: "Forward"
                            on_press:
                                root.mwForward()
                            on_release:
                                root.mwStop()

                    GridLayout:
                        cols:2
                        size_hint: [1, None]
                        size_y: 75

                        AnchorLayout:
                            size_hint: [1, None]
                            size_y: 75
                            anchor_x: 'center'
                            anchor_y: 'center'

                            Button:
                                pos_hint: {'x': 0, 'top': .6}
                                size_hint: [None, None]
                                size: 75, 75
                                text: "Left"
                                on_press:
                                    root.mwLeft()
                                on_release:
                                    root.mwStop()


                        AnchorLayout:
                            size_hint: [1, None]
                            size_y: 75
                            anchor_x: 'center'
                            anchor_y: 'center'

                            Button:
                                pos_hint: {'x': .8, 'top': .6}
                                size_hint: [None, None]
                                size: 75, 75
                                text: "Right"
                                on_press:
                                    root.mwRight()
                                on_release:
                                    root.mwStop()

                    AnchorLayout:
                        size_hint: [1, None]
                        size_y: 75
                        anchor_x: 'center'
                        anchor_y: 'center'

                        Button:
                            pos_hint: {'x': .8, 'top': .6}
                            size_hint: [None, None]
                            size: 75, 75
                            text: "Backward"
                            on_press:
                                root.mwBackward()
                            on_release:
                                root.mwStop()



                    AnchorLayout:
                        size_hint: [1, None]
                        size_y: 75
                        anchor_x: 'center'
                        anchor_y: 'center'

                        StackLayout:
                            size_hint: 1,.5
                            padding: (0,10)
                            canvas:
                                Color:
                                    rgb: [0, 0, 1]
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            AnchorLayout:
                                size_hint: .33,1
                                anchor_x: 'center'
                                anchor_y: 'center'

                                Label:
                                    size_hint: 0.2,1
                                    font_size: 18
                                    text: "Adjust speed:"
                                    italic: True

                            AnchorLayout:
                                size_hint: .33,1
                                anchor_x: 'center'
                                anchor_y: 'center'

                                TextInput:
                                    id: manualspeed
                                    size_hint: 1,1
                                    hint_text: 'Insert Speed'
                                    input_filter: 'int'
                                    font_size: 16
                                    multiline: False
                                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

                            AnchorLayout:
                                size_hint: .33,1
                                anchor_x: 'center'
                                anchor_y: 'center'

                                Button:
                                    size_hint: 1,1
                                    text: "Set"
                                    on_release:
                                        root.mwmanualSpeed()







#            Label:
#                text: "Free space"

#            Label:
#                text: "Free space"

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: .1


            RelativeLayout:

                StackLayout:
                    pos_hint: {'right': 1, 'top': 1}
                    orientation: 'lr-bt'

                    Button:
                        pos_hint: {'left': 1, 'top': 1}
                        size_hint: .1,1
                        text: "PID Tuning"
                        on_release:
                            app.root.current = "pidscreen"
                            root.manager.transition.direction = "left"
                    Button:
                        pos_hint: {'left': 1, 'top': 1}
                        size_hint: .15,1
                        text: "Data Overview"
                        on_release:
                            app.root.current = "datascreen"
                            root.manager.transition.direction = "left"


                StackLayout:
                    pos_hint: {'right': 1, 'top': 1}
                    orientation: 'rl-bt'


                    Button:
                        size_hint: 0.1,1
                        text: "Close"
                        on_release: app.stop()

                    Button:
                        size_hint: 0.1,1
                        text: "Shutdown"
                        on_release: root.mwShutDown()

                    Button:
                        size_hint: 0.1,1
                        text: "Reset"
                        on_release: root.mwReset()

                    Button:
                        size_hint: 0.1,1
                        text: "Stop"
                        on_release: root.mwQuickStop()

                    Button:
                        size_hint: .1,1
                        text: "Disable"
                        on_release: root.mwDisableVoltage()

                    Button:
                        size_hint: .1,1
                        text: "Enable"
                        on_release: root.mwEnable()